<html>
<head>
<meta charset="UTF-8">
<title>Looking Through Time</title>
<script src = "http://d3js.org/d3.v5.min.js"></script>
<style>
	body{
			font: 10px sans-serif;
		}
	svg{
			display: block;
			margin-left: 10%;
			margin-bottom: 50px
		}
</style>
	</head>
	<body>
	<script type="text/javascript">
	 var width = 500;
	 var chartW = 300;
	 var height = 250;
	 var padding = 5;
	 var barwidth = (chartW/7) - padding;
	 var legendW = 15;
	 var legendH = 15;
	 var legendpadding = 5;
	 var xScale = d3.scaleLinear()
							 .domain([0,4])
							 .range([0,width-150])
	var yScale=d3.scaleLinear()
							 .domain([0,100])
							 .range([0,height]); 
	var color = d3.scaleOrdinal(d3.schemeCategory10);

	 var dataP = d3.json("gradedatatime.json");
	 var drawChart = function(data,day){
	 var svg = d3.select("svg")
			     .attr("width",width)
			     .attr("height",height);
		// rects
	var rect = svg.selectAll("rect")
			.data(data[day].grades)
			.enter()
			.append("rect")
			.attr("x",function(d,i){
			  return xScale*(i);
			})
			.attr("y",function(d){
			  return height- yScale(d.grade);
			})
			.attr("width",barwidth)
			.attr("height",function(d){
			  return yScale(d.grade);
			})
			.attr("fill",function(d){
			  return color(d.name);
			})
			 
			svg.append("g")
					.selectAll("text")
					.data(data[day].grades)
					.enter()
					.append("text")
					.attr("x",520)
					.attr("y",function(d,i){
						return i*35+130;})
					.text(function(d){
						return d.name;
					})
				svg.append("g")
					 .classed("date",true)
					 .append("text")
					 .attr("x",475)
					 .attr("y",30)
					 .text("Day:"+data[day].day)
//		// labels
//		//svg.selectAll("text")
//			//.data(data)
//			.enter()
//			.append("text")
//			.text(function(d){
//			  return d.name;
//			})
//			.attr("x",function(d,i){
//			  return i*(barwidth+barpadding)+barwidth/2
//			})
//			.attr("y",function(d){
//			  return height- d.grade*20-5
//			})
//			.attr("text-anchor","middle")
//			.style("font-size",15)
//
//		//legend
//		svg.select("g")
//			.selectAll("rect")
//			.data(data[day].grades)
//			.enter()
//			.append("rect")
//			.attr("x",chartW+50)
//			.attr("y",function(d,i){
//			  return i*(legendH+legendpadding)
//			})
//			.attr("width",legendW)
//			.attr("height",legendH)
//			.attr("fill",function(d){
//			  return d.name
//			})
//		svg.select("g").selectAll("text")
//			.data(data)
//			.enter()
//			.append("text")
//			.attr("x",chartW+legendW+65)
//			.attr("y",function(d,i){
//			 return i*(legendH+legendpadding)+15
//			})
//			.text(function(d){
//			  return d.name
//			})
//

	 }

	 dataP.then(function(d){
		  drawChart(d,0)
		})

	</script>
	</body>
</html>
